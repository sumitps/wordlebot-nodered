[
    {
        "id": "db5ac5f77ac3739f",
        "type": "tab",
        "label": "Novelupdates scrapper",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2cfab5eede4f2846",
        "type": "tab",
        "label": "Telegram Commands",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "35d833788bf497c7",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "70934f2ce73d886f",
        "type": "tab",
        "label": "Flow 2",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "986d8b6a2f4ee332",
        "type": "subflow",
        "name": "Send Telegram Message",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "cdfad5d7db244995"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "0d23d5749e4307cf",
        "type": "subflow",
        "name": "Init User",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 260,
                "wires": [
                    {
                        "id": "2e2c5d131384e0dc"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1540,
                "y": 300,
                "wires": [
                    {
                        "id": "8f3a4635f61f6f78",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "78851ee73ff340dd",
        "type": "subflow",
        "name": "check word",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "6f546501a96fac4f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 340,
                "y": 240,
                "wires": [
                    {
                        "id": "576ac6746c527d03",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "421f31f28d4e35aa",
        "type": "subflow",
        "name": "random image",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "d83bc9ba6f01c45d"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "41fe775afd9b4c70",
        "type": "subflow",
        "name": "reset game",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "d382b7ff33fb67a6"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 760,
                "y": 140,
                "wires": [
                    {
                        "id": "624c48706f711f23",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 220,
                "wires": [
                    {
                        "id": "48796dacc83cad89",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "cce18ff7fab50b69",
        "type": "subflow",
        "name": "send cat",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "cdced9751c2d6dd1"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "92e993ef03399e2c",
        "type": "telegram bot",
        "botname": "tgwordlebot",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "5faa39d33d1f8bf6",
        "type": "sqlitedb",
        "db": "/home/opc/wordle/wordle.db",
        "mode": "RWC"
    },
    {
        "id": "707661ef9f21e8b3",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "8195c56df6dcaf8b",
        "type": "ui_group",
        "name": "Default",
        "tab": "95d83e47f47f135d",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "95d83e47f47f135d",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "cdfad5d7db244995",
        "type": "telegram sender",
        "z": "986d8b6a2f4ee332",
        "name": "Reply",
        "bot": "92e993ef03399e2c",
        "haserroroutput": false,
        "outputs": 1,
        "x": 190,
        "y": 80,
        "wires": [
            [
                "0a20d2a34149fcbb"
            ]
        ]
    },
    {
        "id": "0a20d2a34149fcbb",
        "type": "debug",
        "z": "986d8b6a2f4ee332",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 190,
        "y": 120,
        "wires": []
    },
    {
        "id": "a8229343073a8052",
        "type": "template",
        "z": "0d23d5749e4307cf",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"id\": \"{{payload.chatId}}\",\n    \"username\": \"{{originalMessage.chat.username}}\",\n    \"firstname\": \"{{originalMessage.chat.first_name}}\",\n    \"wintotal\" : 0,\n    \"total\": 0,\n    \"streak\": 0,\n    \"maxstreak\": 0\n}",
        "output": "json",
        "x": 380,
        "y": 300,
        "wires": [
            [
                "f1437d0ae2e61b50"
            ]
        ]
    },
    {
        "id": "0ff16ab8c88002e2",
        "type": "sqlite",
        "z": "0d23d5749e4307cf",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 680,
        "y": 320,
        "wires": [
            [
                "fd5f6a8aa0fd1712"
            ]
        ]
    },
    {
        "id": "f1437d0ae2e61b50",
        "type": "function",
        "z": "0d23d5749e4307cf",
        "name": "Get User",
        "func": "msg.user = msg.payload;\nmsg.topic = \"select * from TELEGRAMUSER where id=\" + msg.payload.id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 340,
        "wires": [
            [
                "f57d0c9f57fc30e0"
            ]
        ]
    },
    {
        "id": "fd5f6a8aa0fd1712",
        "type": "switch",
        "z": "0d23d5749e4307cf",
        "name": "Is User Found",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 680,
        "y": 360,
        "wires": [
            [
                "0833e028ab9772e4"
            ],
            [
                "c067113832941e74"
            ]
        ]
    },
    {
        "id": "0833e028ab9772e4",
        "type": "function",
        "z": "0d23d5749e4307cf",
        "name": "CREATE TELEGRAMUSER User",
        "func": "msg.topic = `INSERT INTO TELEGRAMUSER (id,username,firstname,wintotal,total,streak,maxstreak) VALUES (\n  \"${msg.user.id}\",\n  \"${msg.user.username}\",\n  \"${msg.user.firstname}\",\n  \"${msg.user.wintotal}\",\n  \"${msg.user.total}\",\n  \"${msg.user.streak}\",\n  \"${msg.user.maxstreak}\"\n);`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 80,
        "wires": [
            [
                "b9c64d5a5baa6051"
            ]
        ]
    },
    {
        "id": "b9c64d5a5baa6051",
        "type": "sqlite",
        "z": "0d23d5749e4307cf",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 1040,
        "y": 120,
        "wires": [
            [
                "bd4b643e62598d8c"
            ]
        ]
    },
    {
        "id": "c067113832941e74",
        "type": "change",
        "z": "0d23d5749e4307cf",
        "name": "Set User",
        "rules": [
            {
                "t": "set",
                "p": "user",
                "pt": "msg",
                "to": "payload[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 320,
        "wires": [
            [
                "bd4b643e62598d8c",
                "fda4903265ff29af"
            ]
        ]
    },
    {
        "id": "9618f6f79d572151",
        "type": "sqlite",
        "z": "0d23d5749e4307cf",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 1360,
        "y": 180,
        "wires": [
            [
                "807d87b8fb2ae83b"
            ]
        ]
    },
    {
        "id": "bd4b643e62598d8c",
        "type": "function",
        "z": "0d23d5749e4307cf",
        "name": "Get Active games",
        "func": "msg.topic = \"SELECT * FROM GAMES where gameday='\"+ msg.myymd +\"' and id=\" + msg.user.id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 160,
        "wires": [
            [
                "9867ccc08954ea54"
            ]
        ]
    },
    {
        "id": "9867ccc08954ea54",
        "type": "sqlite",
        "z": "0d23d5749e4307cf",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 1040,
        "y": 200,
        "wires": [
            [
                "98084a831143c006"
            ]
        ]
    },
    {
        "id": "98084a831143c006",
        "type": "switch",
        "z": "0d23d5749e4307cf",
        "name": "Is Game Found",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1040,
        "y": 240,
        "wires": [
            [
                "326e3eaee34fc6b1"
            ],
            [
                "8f3a4635f61f6f78"
            ]
        ]
    },
    {
        "id": "326e3eaee34fc6b1",
        "type": "function",
        "z": "0d23d5749e4307cf",
        "name": "CREATE New Game",
        "func": "msg.topic = `INSERT INTO GAMES (id,gameday,counter,wordsplayed,iscompleted,wordoftheday) VALUES (\n  \"${msg.user.id}\",\n  Date('now'),\n  0,\n  \"[]\",\n  0,\n  \"${msg.wordoftheday}\"\n);`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 140,
        "wires": [
            [
                "9618f6f79d572151"
            ]
        ]
    },
    {
        "id": "8f3a4635f61f6f78",
        "type": "change",
        "z": "0d23d5749e4307cf",
        "name": "Set Current Game",
        "rules": [
            {
                "t": "set",
                "p": "game",
                "pt": "msg",
                "to": "payload[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "807d87b8fb2ae83b",
        "type": "function",
        "z": "0d23d5749e4307cf",
        "name": "Get Active games",
        "func": "msg.topic = \"SELECT * FROM GAMES where iscompleted=false and gameday='\"+ msg.myymd +\"' and id=\" + msg.user.id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1370,
        "y": 220,
        "wires": [
            [
                "d9d64867bc333b49"
            ]
        ]
    },
    {
        "id": "d9d64867bc333b49",
        "type": "sqlite",
        "z": "0d23d5749e4307cf",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 1360,
        "y": 260,
        "wires": [
            [
                "8f3a4635f61f6f78"
            ]
        ]
    },
    {
        "id": "fda4903265ff29af",
        "type": "debug",
        "z": "0d23d5749e4307cf",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 360,
        "wires": []
    },
    {
        "id": "f57d0c9f57fc30e0",
        "type": "join",
        "z": "0d23d5749e4307cf",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "",
        "propertyType": "full",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 650,
        "y": 280,
        "wires": [
            [
                "0ff16ab8c88002e2"
            ]
        ]
    },
    {
        "id": "56dcb3608f26e0cf",
        "type": "simpletime",
        "z": "0d23d5749e4307cf",
        "name": "",
        "mydate": false,
        "myymd": true,
        "myyear": false,
        "mymonth": false,
        "mymonthn": false,
        "mydom": false,
        "mydoy": false,
        "myday": false,
        "myhourpm": false,
        "myhour": false,
        "mytime": false,
        "mytimes": false,
        "myminute": false,
        "myminutes": false,
        "mysecond": false,
        "mymillis": false,
        "myepoch": false,
        "myrawdate": false,
        "mypm": false,
        "x": 390,
        "y": 240,
        "wires": [
            [
                "f57d0c9f57fc30e0"
            ]
        ]
    },
    {
        "id": "49c382673e38da18",
        "type": "file in",
        "z": "0d23d5749e4307cf",
        "name": "Read Word Of The Day",
        "filename": "/home/opc/wordle/store.json",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 430,
        "y": 160,
        "wires": [
            [
                "4152352924684712"
            ]
        ]
    },
    {
        "id": "4152352924684712",
        "type": "change",
        "z": "0d23d5749e4307cf",
        "name": "Set wordoftheday",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "wordoftheday",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 200,
        "wires": [
            [
                "56dcb3608f26e0cf"
            ]
        ]
    },
    {
        "id": "2e2c5d131384e0dc",
        "type": "function",
        "z": "0d23d5749e4307cf",
        "name": "",
        "func": "msg.payload = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 260,
        "wires": [
            [
                "49c382673e38da18",
                "a8229343073a8052"
            ]
        ]
    },
    {
        "id": "a96283229cfdf11e",
        "type": "http request",
        "z": "78851ee73ff340dd",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://bursting-albacore-40.hasura.app/v1/graphql",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 210,
        "y": 160,
        "wires": [
            [
                "5b86930871f5573f"
            ]
        ]
    },
    {
        "id": "6f546501a96fac4f",
        "type": "function",
        "z": "78851ee73ff340dd",
        "name": "",
        "func": "var req= {\n\"query\" : `query FindWordInList{\n  wordlist(where: {list: {_regex:\"${msg.userword}\"}}) {\n    id\n  }\n}`,\n\"variables\":{}\n}\nmsg.headers = {};\nmsg.headers['x-hasura-admin-secret'] = 'aAJUcgtTUKgBuQRYUnmkVLN0oVG012y44UiRj55GDlu2bao1Fc44zHSa9NJq0b5E';\nmsg.headers['content-type'] = 'application/json';\nmsg.payload = req;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 120,
        "wires": [
            [
                "a96283229cfdf11e"
            ]
        ]
    },
    {
        "id": "5b86930871f5573f",
        "type": "json",
        "z": "78851ee73ff340dd",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 190,
        "y": 200,
        "wires": [
            [
                "576ac6746c527d03"
            ]
        ]
    },
    {
        "id": "576ac6746c527d03",
        "type": "function",
        "z": "78851ee73ff340dd",
        "name": "",
        "func": "var res = false;\nif(msg.payload.data.wordlist.length != 0){\n    res = true;\n}\nmsg.isvalid = res;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "d83bc9ba6f01c45d",
        "type": "function",
        "z": "421f31f28d4e35aa",
        "name": "",
        "func": "const token = '5119461428:AAGSvle8ucVqWMfZmyf1ACz-PywatZ2mYhE';\nlet chatId = msg.user.id;\nvar phrases = [\n    \"You've Won!\",\n    \"Awesome!\",\n    \"You win!\",\n    \"Awesome job, my boy!\",\n    \"You did it!\",\n    \"Don't feel smug\",\n    \"F*** you\",\n    \"Anyone could have done that!\",\n    \"Hmm, why even try though?\",\n    \"You sad saaad man!\",\n    \"Are you crazy?\",\n    \"Why the happy face?\",\n    \"Was is worth the effort?\",\n    \"It's just a game.\",\n    \"That's fantastic!\",\n    \"How did you do that?!\",\n    \"Splendid!\",\n    \"You've accomplished the impossible!\",\n    \"I applaud your effort.\",\n    \"What a win!\",\n    \"Terrific!\",\n    \"Bravo!\",\n    \"Hurray!\",\n    \"What an achievement!\",\n    \"You are a legend\",\n    \"This cat praises you!\",\n    \"Nice job!\",\n    \"Here, take my paw!\",\n    \"Huh?! you won? how?\",\n    \"Noooo, why did you win?\",\n    \"Meh, I could do that too.\",\n    \"So what? I can do it too.\",\n    \"Ok\",\n    \"Well deserved!\"\n    ]\nvar choicephrase = phrases[Math.floor(Math.random() * phrases.length)]\nvar params = \"?chat_id=\" + chatId + \n          \"&photo=\" + \"https://cataas.com/cat/says/\" + encodeURI(choicephrase);\nmsg.url = 'https://api.telegram.org/bot' + token + '/sendPhoto' + params;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 240,
        "y": 260,
        "wires": [
            [
                "b15790efca2dc567",
                "95a367269e08c5c6",
                "b15790efca2dc567",
                "95a367269e08c5c6"
            ]
        ]
    },
    {
        "id": "b15790efca2dc567",
        "type": "http request",
        "z": "421f31f28d4e35aa",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 410,
        "y": 260,
        "wires": [
            [
                "95a367269e08c5c6",
                "95a367269e08c5c6"
            ]
        ]
    },
    {
        "id": "95a367269e08c5c6",
        "type": "debug",
        "z": "421f31f28d4e35aa",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "url",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 340,
        "wires": []
    },
    {
        "id": "68f002b1990b0288",
        "type": "function",
        "z": "41fe775afd9b4c70",
        "name": "Get Active games",
        "func": "msg.topic = \"SELECT * FROM GAMES where gameday='\"+ msg.myymd +\"' and id=\" + msg.payload.chatId;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 140,
        "wires": [
            [
                "4b3f656f281b50dc"
            ]
        ]
    },
    {
        "id": "4b3f656f281b50dc",
        "type": "sqlite",
        "z": "41fe775afd9b4c70",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 240,
        "y": 180,
        "wires": [
            [
                "21bc36cba6ef8cb3"
            ]
        ]
    },
    {
        "id": "21bc36cba6ef8cb3",
        "type": "switch",
        "z": "41fe775afd9b4c70",
        "name": "Is Game Found",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 240,
        "y": 220,
        "wires": [
            [
                "624c48706f711f23"
            ],
            [
                "3375eb93264d51e9"
            ]
        ]
    },
    {
        "id": "3375eb93264d51e9",
        "type": "function",
        "z": "41fe775afd9b4c70",
        "name": "DELETE Game",
        "func": "msg.topic = `DELETE FROM GAMES\nWHERE gameid = ${msg.payload[0].gameid} and id = ${msg.payload[0].id}`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 220,
        "wires": [
            [
                "48796dacc83cad89"
            ]
        ]
    },
    {
        "id": "48796dacc83cad89",
        "type": "sqlite",
        "z": "41fe775afd9b4c70",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 700,
        "y": 220,
        "wires": [
            [
                "624c48706f711f23"
            ]
        ]
    },
    {
        "id": "624c48706f711f23",
        "type": "function",
        "z": "41fe775afd9b4c70",
        "name": "Set Reply",
        "func": "var reply = {\n    \"chatId\": msg.originalMessage.from.id,\n    \"type\": \"message\",\n    \"content\": \"Game reset! Enter /start to start a new game\"\n}\n\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "d382b7ff33fb67a6",
        "type": "simpletime",
        "z": "41fe775afd9b4c70",
        "name": "",
        "mydate": false,
        "myymd": true,
        "myyear": false,
        "mymonth": false,
        "mymonthn": false,
        "mydom": false,
        "mydoy": false,
        "myday": false,
        "myhourpm": false,
        "myhour": false,
        "mytime": false,
        "mytimes": false,
        "myminute": false,
        "myminutes": false,
        "mysecond": false,
        "mymillis": false,
        "myepoch": false,
        "myrawdate": false,
        "mypm": false,
        "x": 190,
        "y": 80,
        "wires": [
            [
                "68f002b1990b0288"
            ]
        ]
    },
    {
        "id": "cdced9751c2d6dd1",
        "type": "function",
        "z": "cce18ff7fab50b69",
        "name": "",
        "func": "const token = '5119461428:AAGSvle8ucVqWMfZmyf1ACz-PywatZ2mYhE';\nlet chatId = msg.payload.chatId;\nvar phrases = [\"Hello\",\n\"Bonjour\",\n\"Hola\",\n\"Ciao\",\n\"OlÃ¡\",\n\"Kia Ora\",\n\"Gâ€™day\",\n\"Geia\",\n\"Zdravo\",\n\"Zdravo\",\n\"Privet\",\n\"NÇ hÇŽo\",\n\"NÇ hÇŽo\",\n\"Namaste\",\n\"Konâ€™nichiwa\",\n\"Merhaba\",\n\"Anyeong Haseyo\",\n\"Ahoj\",\n\"Guten tag\",\n\"Hallo\",\n\"CzeÅ›Ä‡\",\n\"SÌ„wáº¡sÌ„dÄ«\",\n\"Szia\",\n\"Ahoj\",\n\"HyÄlÅ\",\n\"Assalam u Alaikum\",\n\"SalÄm\",\n\"Dobryj Den\",\n\"HallÃ¥\",\n\"Hallo\",\n\"BunÃ¢\",\n\"Shalom\",\n\"Barev\",\n\"Marhabaan\",\n\"Sata SrÄ« AkÄla\",\n\"halo\",\n\"Selamat Pagi\",\n\"Xin ChÃ o\",\n\"Kaixo\",\n\"Servus\",\n\"Kamusta\",\n\"Jambo\",\n\"Salom\",\n\"Salam\",\n\"Slav\",\n\"Namaste\",\n\"Bonjou\",\n\"Dobry DzieÅ„\",\n\"Moni\",\n\"Bula\",\n\"Aloha\",\n\"TÄlofa\",\n\"MÄlÅ e lelei\",\n\"A Gutn Tog\",\n\"Sâ€™mae\",\n\"Hei\",\n\"Sveiki\",\n\"Sveika\",\n\"HallÃ³\",\n\"HalÃ²\",\n\"Dia Duit\",\n\"Tere\",\n\"Zdravo\",\n\"Tashi Delek\",\n\"Sabaidee\",\n\"Gamarjoba\",\n\"Dumela\",\n\"Saluton\",\n\"Bongu\",\n\"Hello\",\n\"Nde-ewo\",\n\"MoÃ¯en\",\n\"Yaâ€™atâ€™eeh\",\n\"GrÃ¼ezi\",\n\"Ia Orana\",\n\"PÃ«rshÃ«ndetje\",\n\"Hola\",\n\"Ola\",\n\"Sain uu\",\n\"Salaam Aleekum\",\n\"NÃ³ng gÅ\",\n\"Vanakkam\",\n\"Salam\",\n\"NamaskÄra\",\n\"Sannu\",\n\"Mingalaba\",\n\"Selam\",\n\"Demat\",\n\"Akkam\",\n\"Khurumjari\",\n\"Kumusta\",\n\"Salama\",\n\"Henda ho\",\n\"Choum Reap Sor\",\n\"Ayubowan\",\n\"Salam Alaykum\",\n\"Li-hÃ³\",\n\"Dumela\",\n\"Allianchu\",\n\"Molweni\"]\nvar choicephrase = phrases[Math.floor(Math.random() * phrases.length)]\nvar params = \"?chat_id=\" + chatId + \n          \"&photo=\" + \"https://cataas.com/cat/says/\" + encodeURI(choicephrase);\nmsg.url = 'https://api.telegram.org/bot' + token + '/sendPhoto' + params;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 80,
        "wires": [
            [
                "0b60089580481d99"
            ]
        ]
    },
    {
        "id": "0b60089580481d99",
        "type": "http request",
        "z": "cce18ff7fab50b69",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 430,
        "y": 80,
        "wires": [
            [
                "59c0dcf4d86a3bab"
            ]
        ]
    },
    {
        "id": "59c0dcf4d86a3bab",
        "type": "debug",
        "z": "cce18ff7fab50b69",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 80,
        "wires": []
    },
    {
        "id": "ad710282bdc4d32f",
        "type": "debug",
        "z": "db5ac5f77ac3739f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 120,
        "wires": []
    },
    {
        "id": "bcaaf39f730e7e08",
        "type": "inject",
        "z": "db5ac5f77ac3739f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 140,
        "wires": [
            [
                "b90387a40b22b079"
            ]
        ]
    },
    {
        "id": "b90387a40b22b079",
        "type": "http request",
        "z": "db5ac5f77ac3739f",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://novel-scrapper-2.herokuapp.com//search?url=https://www.novelupdates.com/series-ranking/?rank=popmonth&pg=1",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 370,
        "y": 140,
        "wires": [
            [
                "2c0183568284242d",
                "c5db66607038c80e",
                "ae6a120462277d73",
                "24d8cf0a8ff107b9"
            ]
        ]
    },
    {
        "id": "2c0183568284242d",
        "type": "html",
        "z": "db5ac5f77ac3739f",
        "name": "link",
        "property": "payload",
        "outproperty": "payload",
        "tag": "div.search_title > a",
        "ret": "text",
        "as": "single",
        "x": 550,
        "y": 80,
        "wires": [
            [
                "395fec949fed9c36"
            ]
        ]
    },
    {
        "id": "c5db66607038c80e",
        "type": "html",
        "z": "db5ac5f77ac3739f",
        "name": "title",
        "property": "payload",
        "outproperty": "payload",
        "tag": "div.search_title > a",
        "ret": "attr",
        "as": "single",
        "x": 570,
        "y": 120,
        "wires": [
            [
                "395fec949fed9c36"
            ]
        ]
    },
    {
        "id": "395fec949fed9c36",
        "type": "join",
        "z": "db5ac5f77ac3739f",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "4",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 770,
        "y": 120,
        "wires": [
            [
                "43e833d79b26510e"
            ]
        ]
    },
    {
        "id": "43e833d79b26510e",
        "type": "function",
        "z": "db5ac5f77ac3739f",
        "name": "",
        "func": "var result = []\nmsg.payload[0].map(function(e,i){\n    b = {\n        \"title\": e,\n        \"href\": msg.payload[1][i].href,\n        \"tags\": msg.payload[2][i].split(\" \"),\n        \"rank\": parseInt(msg.payload[3][i].split(\"#\")[1])\n    }\n    result.push(b);\n})\nmsg.payload = result;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 120,
        "wires": [
            [
                "ad710282bdc4d32f"
            ]
        ]
    },
    {
        "id": "ae6a120462277d73",
        "type": "html",
        "z": "db5ac5f77ac3739f",
        "name": "tags",
        "property": "payload",
        "outproperty": "payload",
        "tag": "div.search_genre",
        "ret": "text",
        "as": "single",
        "x": 550,
        "y": 160,
        "wires": [
            [
                "395fec949fed9c36"
            ]
        ]
    },
    {
        "id": "24d8cf0a8ff107b9",
        "type": "html",
        "z": "db5ac5f77ac3739f",
        "name": "rank",
        "property": "payload",
        "outproperty": "payload",
        "tag": "span.genre_rank",
        "ret": "text",
        "as": "single",
        "x": 530,
        "y": 200,
        "wires": [
            [
                "395fec949fed9c36"
            ]
        ]
    },
    {
        "id": "ba22a6c88527afe5",
        "type": "http in",
        "z": "db5ac5f77ac3739f",
        "name": "",
        "url": "/location",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 250,
        "y": 360,
        "wires": [
            [
                "a0512dd41078f4da",
                "15cb5f2a852bd653"
            ]
        ]
    },
    {
        "id": "15cb5f2a852bd653",
        "type": "http response",
        "z": "db5ac5f77ac3739f",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 360,
        "wires": []
    },
    {
        "id": "a0512dd41078f4da",
        "type": "debug",
        "z": "db5ac5f77ac3739f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 470,
        "y": 440,
        "wires": []
    },
    {
        "id": "e7b672f57314fed7",
        "type": "telegram command",
        "z": "2cfab5eede4f2846",
        "name": "Start",
        "command": "/start",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "92e993ef03399e2c",
        "strict": false,
        "hasresponse": true,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 2,
        "x": 270,
        "y": 600,
        "wires": [
            [
                "fa4c9e49d9600ca2"
            ],
            []
        ]
    },
    {
        "id": "649b6f38068e0c34",
        "type": "inject",
        "z": "2cfab5eede4f2846",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 12 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 820,
        "wires": [
            [
                "9d246efd92741a5c"
            ]
        ]
    },
    {
        "id": "0b78aa552886258b",
        "type": "telegram receiver",
        "z": "2cfab5eede4f2846",
        "name": "Received Input",
        "bot": "92e993ef03399e2c",
        "saveDataDir": "",
        "filterCommands": true,
        "x": 520,
        "y": 800,
        "wires": [
            [
                "0b8d437138cecd7f"
            ],
            []
        ]
    },
    {
        "id": "9d246efd92741a5c",
        "type": "file in",
        "z": "2cfab5eede4f2846",
        "name": "Read Word List",
        "filename": "/home/opc/wordle/wordlist.json",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 220,
        "y": 860,
        "wires": [
            [
                "3b86b095997798dd",
                "3b86b095997798dd"
            ]
        ]
    },
    {
        "id": "4bcf72af181fc8a0",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Select Word Of The Day",
        "func": "msg.payload = msg.payload[Math.floor(Math.random() * msg.payload.length)];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 940,
        "wires": [
            [
                "343b6e4edc843031"
            ]
        ]
    },
    {
        "id": "05795f20e8b98710",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Verify Word",
        "func": "var uw = msg.userword;\nvar cw = msg.game.wordoftheday;\nout = [0,0,0,0,0]\nfunction add20s(uw, cw) {\n    res = ['x', 'x', 'x', 'x', 'x'];\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] == uw[i]) {\n            res[i] = 2;\n        } else if (cw[i] != uw[i] && !cw.split(\"\").includes(uw[i])) {\n            res[i] = 0;\n        }\n    }\n    return res;\n}\n\nfunction add2s(uw, cw) {\n    x = '';\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] != uw[i]) {\n            x += cw[i]\n        }\n    }\n    return x;\n}\n\nfunction f(uw, cw) {\n    farr = add20s(uw, cw);\n    fcw = add2s(uw, cw);\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x' && fcw.split(\"\").includes(uw[i])) {\n            farr[i] = 1;\n            fcw = fcw.replace(uw[i], '', 1)\n        }\n    }\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x') {\n            farr[i] = 0;\n        }\n    }\n    return farr;\n}\n\nif (uw == cw){\n    result = {\n        \"hint\" : out,\n        \"ismatch\" : true,\n        \"message\": \"You Won!\"\n    }\n}\nelse{\n    result = {\n        \"hint\" : f(uw, cw),\n        \"ismatch\" : false,\n        \"message\": \"Hmm, try again!\"\n    }\n}\n\nmsg.payload = result;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 900,
        "wires": [
            [
                "e6fa56894fd95452",
                "a54b2ffbf9a0d0c1"
            ]
        ]
    },
    {
        "id": "e8d0332f3948bd37",
        "type": "debug",
        "z": "2cfab5eede4f2846",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 210,
        "y": 1100,
        "wires": []
    },
    {
        "id": "8d7841bbd3c6872f",
        "type": "change",
        "z": "2cfab5eede4f2846",
        "name": "Set userword",
        "rules": [
            {
                "t": "move",
                "p": "payload.content",
                "pt": "msg",
                "to": "userword",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "userword",
                "pt": "msg",
                "to": "$lowercase(msg.userword)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 840,
        "wires": [
            [
                "90f0a4b22f08e167"
            ]
        ]
    },
    {
        "id": "e6fa56894fd95452",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Message",
        "func": "var green = \"ðŸŸ©\"\nvar yellow = \"ðŸŸ¨\"\nvar black = \"â¬›\"\n\nif(msg.payload.ismatch){\n    a = green + green + green + green + green + \"\\nYou Won!\"\n}else{\n    a = \"\";\n    for(var i=0; i < 5; i++){\n        if(msg.payload.hint[i] == 2){\n            a = a + green;\n        }\n        else if(msg.payload.hint[i] == 1){\n            a = a + yellow;\n        }\n        else {\n            a = a + black;\n        }\n    }\n}\nmsg.payload.content = a;\nmsg.game.counter += 1;\nvar res = \"\";\nif(msg.game.counter == 6 && msg.payload.ismatch){\n    res = \"lastattemptsuccess\";\n}else if(msg.game.counter == 6 && !msg.payload.ismatch){\n    res = \"lastattemptfail\";\n}else if(msg.payload.ismatch){\n    res = \"success\";\n}else {\n    res = \"fail\";\n}\n\nmsg.res = res;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 940,
        "wires": [
            [
                "e66d0613057e7a81",
                "a54b2ffbf9a0d0c1"
            ]
        ]
    },
    {
        "id": "8949b35ddd0d9395",
        "type": "telegram command",
        "z": "2cfab5eede4f2846",
        "name": "Get Stats",
        "command": "/stats",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "92e993ef03399e2c",
        "strict": false,
        "hasresponse": true,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 2,
        "x": 120,
        "y": 1320,
        "wires": [
            [
                "8c80a0224adce448"
            ],
            []
        ]
    },
    {
        "id": "460be5ceda20f8a1",
        "type": "subflow:986d8b6a2f4ee332",
        "z": "2cfab5eede4f2846",
        "name": "Send message",
        "x": 1040,
        "y": 620,
        "wires": []
    },
    {
        "id": "6d5c83164101b0f7",
        "type": "subflow:986d8b6a2f4ee332",
        "z": "2cfab5eede4f2846",
        "name": "Send message",
        "x": 1160,
        "y": 1420,
        "wires": []
    },
    {
        "id": "3b86b095997798dd",
        "type": "json",
        "z": "2cfab5eede4f2846",
        "name": "Convert to JSON",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 230,
        "y": 900,
        "wires": [
            [
                "4bcf72af181fc8a0",
                "4bcf72af181fc8a0"
            ]
        ]
    },
    {
        "id": "343b6e4edc843031",
        "type": "join",
        "z": "2cfab5eede4f2846",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "2",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 190,
        "y": 980,
        "wires": [
            [
                "f057eaad63d3b6f1"
            ]
        ]
    },
    {
        "id": "f057eaad63d3b6f1",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Select Word Of The Day",
        "func": "msg.payload = msg.payload[Math.floor(Math.random() * msg.payload.length)];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 1020,
        "wires": [
            [
                "f6b9db0c568462fc"
            ]
        ]
    },
    {
        "id": "f6b9db0c568462fc",
        "type": "file",
        "z": "2cfab5eede4f2846",
        "name": "Write Word Of The Day",
        "filename": "/home/opc/wordle/store.json",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 250,
        "y": 1060,
        "wires": [
            [
                "e8d0332f3948bd37"
            ]
        ]
    },
    {
        "id": "0c1fbf59f1929ff0",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "",
        "property": "isvalid",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 550,
        "y": 980,
        "wires": [
            [
                "67bed195d20367b4"
            ],
            [
                "e1d4f73e4dc6e06e"
            ]
        ]
    },
    {
        "id": "b29cd5a7f2298b0c",
        "type": "subflow:986d8b6a2f4ee332",
        "z": "2cfab5eede4f2846",
        "name": "Send message",
        "x": 980,
        "y": 1080,
        "wires": []
    },
    {
        "id": "ebf09d3cb442735e",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Reply",
        "func": "var count = 6 - msg.game.counter;\nvar wordsplayed = JSON.parse(msg.game.wordsplayed);\nvar green = \"ðŸŸ©\";\nvar yellow = \"ðŸŸ¨\";\nvar black = \"â¬›\";\nvar blank = \"â˜\";\nvar i=0;\nvar j=0;\nvar cw = msg.game.wordoftheday;\nvar fname = msg.user.firstname;\n\nfunction add20s(uw, cw) {\n    res = ['x', 'x', 'x', 'x', 'x'];\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] == uw[i]) {\n            res[i] = 2;\n        } else if (cw[i] != uw[i] && !cw.split(\"\").includes(uw[i])) {\n            res[i] = 0;\n        }\n    }\n    return res;\n}\n\nfunction add2s(uw, cw) {\n    x = '';\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] != uw[i]) {\n            x += cw[i]\n        }\n    }\n    return x;\n}\n\nfunction f(uw, cw) {\n    farr = add20s(uw, cw);\n    fcw = add2s(uw, cw);\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x' && fcw.split(\"\").includes(uw[i])) {\n            farr[i] = 1;\n            fcw = fcw.replace(uw[i], '', 1)\n        }\n    }\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x') {\n            farr[i] = 0;\n        }\n    }\n    return farr;\n}\n\nfunction gamestate(){\n    var s = \"\";\n    if(wordsplayed.length == 0){\n        for(i=0; i<6;i++){\n            for(j=0; j<5;j++){\n                s+=blank;\n            }\n            s+=\"\\n\";\n        }\n    }else {\n        for(j=0; j < wordsplayed.length; j++){\n            let uw = wordsplayed[j];\n            for(var z=0;z<uw.length;z++){\n                s+=uw[z] + \"   \"\n            }\n            s+=\"\\n\";\n            let res = f(uw, cw);\n            for(i=0; i < 5; i++){\n                if(res[i] == 2){\n                    s += green;\n                }\n                else if(res[i] == 1){\n                    s += yellow;\n                }\n                else {\n                    s += black;\n                }\n            }\n            s+=\"\\n\";\n        }\n    }\n    return s;\n}\n\nvar reply = {\n    \"chatId\": msg.user.id,\n    \"type\": \"message\",\n    \"content\": \"Game Started, you've got \" + count + \" tries to get this right \" + fname + \"!\\n\" + gamestate()\n}\n\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 620,
        "wires": [
            [
                "460be5ceda20f8a1"
            ]
        ]
    },
    {
        "id": "e3125dc06a5ec77d",
        "type": "debug",
        "z": "2cfab5eede4f2846",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 580,
        "wires": []
    },
    {
        "id": "37d44549740cfbe3",
        "type": "subflow:0d23d5749e4307cf",
        "z": "2cfab5eede4f2846",
        "name": "Init User",
        "x": 660,
        "y": 580,
        "wires": [
            [
                "e3125dc06a5ec77d",
                "d7f7ea4f91b50fac"
            ]
        ]
    },
    {
        "id": "fac09d5c4c7d8e6f",
        "type": "subflow:0d23d5749e4307cf",
        "z": "2cfab5eede4f2846",
        "name": "Init User",
        "x": 760,
        "y": 800,
        "wires": [
            [
                "90f0a4b22f08e167"
            ]
        ]
    },
    {
        "id": "90f0a4b22f08e167",
        "type": "join",
        "z": "2cfab5eede4f2846",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "",
        "propertyType": "full",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 950,
        "y": 840,
        "wires": [
            [
                "b72d71ffce393b23"
            ]
        ]
    },
    {
        "id": "e1d4f73e4dc6e06e",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Reply",
        "func": "var count = 6 - msg.game.counter;\nvar wordsplayed = JSON.parse(msg.game.wordsplayed);\nvar green = \"ðŸŸ©\";\nvar yellow = \"ðŸŸ¨\";\nvar black = \"â¬›\";\nvar blank = \"â˜\";\nvar i=0;\nvar j=0;\nvar cw = msg.game.wordoftheday;\nvar fname = msg.user.firstname;\n\nfunction add20s(uw, cw) {\n    res = ['x', 'x', 'x', 'x', 'x'];\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] == uw[i]) {\n            res[i] = 2;\n        } else if (cw[i] != uw[i] && !cw.split(\"\").includes(uw[i])) {\n            res[i] = 0;\n        }\n    }\n    return res;\n}\n\nfunction add2s(uw, cw) {\n    x = '';\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] != uw[i]) {\n            x += cw[i]\n        }\n    }\n    return x;\n}\n\nfunction f(uw, cw) {\n    farr = add20s(uw, cw);\n    fcw = add2s(uw, cw);\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x' && fcw.split(\"\").includes(uw[i])) {\n            farr[i] = 1;\n            fcw = fcw.replace(uw[i], '', 1)\n        }\n    }\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x') {\n            farr[i] = 0;\n        }\n    }\n    return farr;\n}\n\nfunction gamestate(){\n    var s = \"\";\n    if(wordsplayed.length == 0){\n        for(i=0; i<6;i++){\n            for(j=0; j<5;j++){\n                s+=blank;\n            }\n            s+=\"\\n\";\n        }\n    }else {\n        for(j=0; j < wordsplayed.length; j++){\n            let uw = wordsplayed[j];\n            for(var z=0;z<uw.length;z++){\n                s+=uw[z] + \"   \"\n            }\n            s+=\"\\n\";\n            let res = f(uw, cw);\n            for(i=0; i < 5; i++){\n                if(res[i] == 2){\n                    s += green;\n                }\n                else if(res[i] == 1){\n                    s += yellow;\n                }\n                else {\n                    s += black;\n                }\n            }\n            s+=\"\\n\";\n        }\n    }\n    return s;\n}\n\nvar reply = {\n    \"chatId\": msg.user.id,\n    \"type\": \"message\",\n    \"content\": \"Invalid word, you've got \" + count + \" tries to get this right \" + fname + \"!\\n\" + gamestate()\n}\n\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1040,
        "wires": [
            [
                "b29cd5a7f2298b0c"
            ]
        ]
    },
    {
        "id": "f162bd220f82667f",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "",
        "property": "res",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "lastattemptsuccess",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "lastattemptfail",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "success",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 1190,
        "y": 1080,
        "wires": [
            [
                "b0c2c22bd0f2db50"
            ],
            [
                "fbee9b444446b4ef"
            ],
            [
                "5f87e404f1f8dcd2"
            ],
            [
                "8a0836bf4ff4378f"
            ]
        ]
    },
    {
        "id": "b72d71ffce393b23",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "Iscompleted",
        "property": "game.iscompleted",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 530,
        "y": 880,
        "wires": [
            [
                "657f077e27e82008"
            ],
            [
                "31a9da2877113a7a"
            ]
        ]
    },
    {
        "id": "31a9da2877113a7a",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Reply",
        "func": "var wordsplayed = JSON.parse(msg.game.wordsplayed);\nvar green = \"ðŸŸ©\";\nvar yellow = \"ðŸŸ¨\";\nvar black = \"â¬›\";\nvar blank = \"â˜\";\nvar i=0;\nvar j=0;\nvar cw = msg.game.wordoftheday;\nvar fname = msg.user.firstname;\n\nfunction add20s(uw, cw) {\n    res = ['x', 'x', 'x', 'x', 'x'];\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] == uw[i]) {\n            res[i] = 2;\n        } else if (cw[i] != uw[i] && !cw.split(\"\").includes(uw[i])) {\n            res[i] = 0;\n        }\n    }\n    return res;\n}\n\nfunction add2s(uw, cw) {\n    x = '';\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] != uw[i]) {\n            x += cw[i]\n        }\n    }\n    return x;\n}\n\nfunction f(uw, cw) {\n    farr = add20s(uw, cw);\n    fcw = add2s(uw, cw);\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x' && fcw.split(\"\").includes(uw[i])) {\n            farr[i] = 1;\n            fcw = fcw.replace(uw[i], '', 1)\n        }\n    }\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x') {\n            farr[i] = 0;\n        }\n    }\n    return farr;\n}\n\nfunction gamestate(){\n    var s = \"\";\n    if(wordsplayed.length == 0){\n        for(i=0; i<6;i++){\n            for(j=0; j<5;j++){\n                s+=blank;\n            }\n            s+=\"\\n\";\n        }\n    }else {\n        for(j=0; j < wordsplayed.length; j++){\n            let uw = wordsplayed[j];\n            for(var z=0;z<uw.length;z++){\n                s+=uw[z] + \"   \"\n            }\n            s+=\"\\n\";\n            let res = f(uw, cw);\n            for(i=0; i < 5; i++){\n                if(res[i] == 2){\n                    s += green;\n                }\n                else if(res[i] == 1){\n                    s += yellow;\n                }\n                else {\n                    s += black;\n                }\n            }\n            s+=\"\\n\";\n        }\n    }\n    return s;\n}\n\nvar reply = {\n    \"chatId\": msg.user.id,\n    \"type\": \"message\",\n    \"content\": \"Your game for today has already ended\\n\" + gamestate()\n}\n\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1140,
        "wires": [
            [
                "a2f18319ad030ded",
                "a54b2ffbf9a0d0c1"
            ]
        ]
    },
    {
        "id": "a2f18319ad030ded",
        "type": "subflow:986d8b6a2f4ee332",
        "z": "2cfab5eede4f2846",
        "name": "Send message",
        "x": 980,
        "y": 1180,
        "wires": []
    },
    {
        "id": "e66d0613057e7a81",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Gamestate",
        "func": "var wordsplayed = JSON.parse(msg.game.wordsplayed);\nvar green = \"ðŸŸ©\";\nvar yellow = \"ðŸŸ¨\";\nvar black = \"â¬›\";\nvar blank = \"â˜\";\nvar i=0;\nvar j=0;\nvar cw = msg.game.wordoftheday;\nvar fname = msg.user.firstname;\n\nfunction add20s(uw, cw) {\n    res = ['x', 'x', 'x', 'x', 'x'];\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] == uw[i]) {\n            res[i] = 2;\n        } else if (cw[i] != uw[i] && !cw.split(\"\").includes(uw[i])) {\n            res[i] = 0;\n        }\n    }\n    return res;\n}\n\nfunction add2s(uw, cw) {\n    x = '';\n    for (let i = 0; i < 5; i++) {\n        if (cw[i] != uw[i]) {\n            x += cw[i]\n        }\n    }\n    return x;\n}\n\nfunction f(uw, cw) {\n    farr = add20s(uw, cw);\n    fcw = add2s(uw, cw);\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x' && fcw.split(\"\").includes(uw[i])) {\n            farr[i] = 1;\n            fcw = fcw.replace(uw[i], '', 1)\n        }\n    }\n    for (let i = 0; i < 5; i++) {\n        if (farr[i] == 'x') {\n            farr[i] = 0;\n        }\n    }\n    return farr;\n}\n\nfunction gamestate(){\n    var s = \"\";\n    if(wordsplayed.length == 0){\n        for(i=0; i<6;i++){\n            for(j=0; j<5;j++){\n                s+=blank;\n            }\n            s+=\"\\n\";\n        }\n    }else {\n        for(j=0; j < wordsplayed.length; j++){\n            let uw = wordsplayed[j];\n            for(var z=0;z<uw.length;z++){\n                s+=uw[z] + \"   \"\n            }\n            s+=\"\\n\";\n            let res = f(uw, cw);\n            for(i=0; i < 5; i++){\n                if(res[i] == 2){\n                    s += green;\n                }\n                else if(res[i] == 1){\n                    s += yellow;\n                }\n                else {\n                    s += black;\n                }\n            }\n            s+=\"\\n\";\n        }\n    }\n    return s;\n}\nwordsplayed.push(msg.userword);\nmsg.game.wordsplayed = JSON.stringify(wordsplayed);\nmsg.gamestate = gamestate();\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 940,
        "wires": [
            [
                "b85c12d8186db864"
            ]
        ]
    },
    {
        "id": "fbee9b444446b4ef",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Reply",
        "func": "var reply = {\n    \"chatId\": msg.user.id,\n    \"type\": \"message\",\n    \"content\": \"You lose! Try again tomorrow.\\n\" + msg.gamestate\n}\n\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 1060,
        "wires": [
            [
                "4f07095fa8b43cbb",
                "1a44b0cc100c6413"
            ]
        ]
    },
    {
        "id": "5f87e404f1f8dcd2",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Reply",
        "func": "var reply = {\n    \"chatId\": msg.user.id,\n    \"type\": \"message\",\n    \"content\": \"Splendid! You did it!\\n\" + msg.gamestate\n}\n\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 1100,
        "wires": [
            [
                "4f07095fa8b43cbb",
                "a45c45afa45fc195",
                "d75905b99cab1642"
            ]
        ]
    },
    {
        "id": "8a0836bf4ff4378f",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Reply",
        "func": "var count = 6 - msg.game.counter; \nvar reply = {\n    \"chatId\": msg.user.id,\n    \"type\": \"message\",\n    \"content\": \"You've got \" + count + \" tries left.\\n\" + msg.gamestate\n}\n\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 1140,
        "wires": [
            [
                "4f07095fa8b43cbb"
            ]
        ]
    },
    {
        "id": "4f07095fa8b43cbb",
        "type": "subflow:986d8b6a2f4ee332",
        "z": "2cfab5eede4f2846",
        "name": "Send message",
        "x": 1640,
        "y": 1080,
        "wires": []
    },
    {
        "id": "b85c12d8186db864",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "",
        "func": "var iscompleted = false;\nif(msg.payload.ismatch || msg.game.counter == 6){\n    iscompleted = true;\n}\n\nvar gameupdate = \"counter=\"+msg.game.counter\n    +\", wordsplayed='\"+msg.game.wordsplayed + \"'\"\n    +\", iscompleted=\"+iscompleted\n\nmsg.topic = \"UPDATE GAMES SET \" + gameupdate + \n\t\t\" WHERE gameid=\"+msg.game.gameid\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 940,
        "wires": [
            [
                "49181c8c2985e6ae"
            ]
        ]
    },
    {
        "id": "b0c2c22bd0f2db50",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Reply",
        "func": "var reply = {\n    \"chatId\": msg.user.id,\n    \"type\": \"message\",\n    \"content\": \"You managed to win on your last try. Well done!\\n\" + msg.gamestate\n}\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 1020,
        "wires": [
            [
                "4f07095fa8b43cbb",
                "a45c45afa45fc195",
                "d75905b99cab1642"
            ]
        ]
    },
    {
        "id": "49181c8c2985e6ae",
        "type": "sqlite",
        "z": "2cfab5eede4f2846",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 1520,
        "y": 940,
        "wires": [
            [
                "f162bd220f82667f"
            ]
        ]
    },
    {
        "id": "a54b2ffbf9a0d0c1",
        "type": "debug",
        "z": "2cfab5eede4f2846",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1290,
        "y": 880,
        "wires": []
    },
    {
        "id": "d7f7ea4f91b50fac",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "Iscompleted",
        "property": "game.iscompleted",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 660,
        "wires": [
            [
                "ebf09d3cb442735e"
            ],
            [
                "31a9da2877113a7a"
            ]
        ]
    },
    {
        "id": "a45c45afa45fc195",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "",
        "func": "var gameupdate = \"wintotal=\"+(msg.user.wintotal+1)\n    +\", total=\"+(msg.user.total+1)\n\nmsg.topic = \"UPDATE TELEGRAMUSER SET \" + gameupdate + \n\t\t\" WHERE id=\"+msg.user.id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 1020,
        "wires": [
            [
                "9a23ab4a13a6bd42"
            ]
        ]
    },
    {
        "id": "9a23ab4a13a6bd42",
        "type": "sqlite",
        "z": "2cfab5eede4f2846",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 1800,
        "y": 1020,
        "wires": [
            [
                "1cb00310d404410c"
            ]
        ]
    },
    {
        "id": "1a44b0cc100c6413",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "",
        "func": "var gameupdate = \"total=\"+(msg.user.total+1)\n\nmsg.topic = \"UPDATE TELEGRAMUSER SET \" + gameupdate + \n\t\t\" WHERE id=\"+msg.user.id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 1140,
        "wires": [
            [
                "7cc53078e295a41b"
            ]
        ]
    },
    {
        "id": "7cc53078e295a41b",
        "type": "sqlite",
        "z": "2cfab5eede4f2846",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 1800,
        "y": 1140,
        "wires": [
            [
                "1cb00310d404410c"
            ]
        ]
    },
    {
        "id": "1cb00310d404410c",
        "type": "debug",
        "z": "2cfab5eede4f2846",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1850,
        "y": 1080,
        "wires": []
    },
    {
        "id": "5e2bb1db07d15f61",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Get User",
        "func": "msg.user = msg.payload;\nmsg.topic = \"select * from TELEGRAMUSER where id=\" + msg.payload.chatId\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 1340,
        "wires": [
            [
                "c5681fa42d1eab35"
            ]
        ]
    },
    {
        "id": "c5681fa42d1eab35",
        "type": "sqlite",
        "z": "2cfab5eede4f2846",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 540,
        "y": 1340,
        "wires": [
            [
                "51996083e92f408b"
            ]
        ]
    },
    {
        "id": "5cd8e16422b318dd",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Message",
        "func": "var stats = \n    \"Games played: \" + msg.payload[0].total + \n    \"\\nWin Percentage: \" + ((msg.payload[0].wintotal/msg.payload[0].total)*100) + \"%\"\n    //\"\\nGuess Distribution: \" + msg.user. \n\nmsg.payload = {\n    \"chatId\": msg.originalMessage.chat.id,\n    \"type\": \"message\",\n    \"content\": \"Your stats:\\n\" + stats\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 1420,
        "wires": [
            [
                "6d5c83164101b0f7"
            ]
        ]
    },
    {
        "id": "51996083e92f408b",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "Is User Found",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 740,
        "y": 1400,
        "wires": [
            [
                "7334d7290375a9e4",
                "c51b747e5d9ec72a"
            ],
            [
                "5cd8e16422b318dd",
                "c51b747e5d9ec72a"
            ]
        ]
    },
    {
        "id": "b74c0f1b706281c8",
        "type": "subflow:986d8b6a2f4ee332",
        "z": "2cfab5eede4f2846",
        "name": "Send message",
        "x": 1140,
        "y": 1360,
        "wires": []
    },
    {
        "id": "7334d7290375a9e4",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Message",
        "func": "msg.payload = {\n    \"chatId\": msg.originalMessage.chat.id,\n    \"type\": \"message\",\n    \"content\": \"Play a game to update your stats.\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 1360,
        "wires": [
            [
                "b74c0f1b706281c8"
            ]
        ]
    },
    {
        "id": "c51b747e5d9ec72a",
        "type": "debug",
        "z": "2cfab5eede4f2846",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 1260,
        "wires": []
    },
    {
        "id": "1779ffdd3a371be2",
        "type": "telegram command",
        "z": "2cfab5eede4f2846",
        "name": "Reset Game",
        "command": "/reset",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "92e993ef03399e2c",
        "strict": false,
        "hasresponse": true,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 2,
        "x": 110,
        "y": 500,
        "wires": [
            [
                "4ddc01081573a717"
            ],
            []
        ]
    },
    {
        "id": "67bed195d20367b4",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "",
        "property": "userword",
        "propertyType": "msg",
        "rules": [
            {
                "t": "regex",
                "v": "^[a-zA-Z]{5}$",
                "vt": "str",
                "case": true
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 940,
        "wires": [
            [
                "05795f20e8b98710"
            ],
            [
                "e1d4f73e4dc6e06e"
            ]
        ]
    },
    {
        "id": "657f077e27e82008",
        "type": "subflow:78851ee73ff340dd",
        "z": "2cfab5eede4f2846",
        "name": "Is valid word",
        "x": 530,
        "y": 920,
        "wires": [
            [
                "0c1fbf59f1929ff0"
            ]
        ]
    },
    {
        "id": "d75905b99cab1642",
        "type": "subflow:421f31f28d4e35aa",
        "z": "2cfab5eede4f2846",
        "name": "send surprise",
        "x": 1630,
        "y": 1220,
        "wires": []
    },
    {
        "id": "af65daa16788dca5",
        "type": "debug",
        "z": "2cfab5eede4f2846",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 520,
        "wires": []
    },
    {
        "id": "ac7388ef90ea5d4a",
        "type": "subflow:986d8b6a2f4ee332",
        "z": "2cfab5eede4f2846",
        "name": "Send message",
        "x": 620,
        "y": 480,
        "wires": []
    },
    {
        "id": "d86347bdc92cf255",
        "type": "subflow:41fe775afd9b4c70",
        "z": "2cfab5eede4f2846",
        "name": "reset game",
        "x": 410,
        "y": 500,
        "wires": [
            [
                "ac7388ef90ea5d4a"
            ],
            [
                "af65daa16788dca5"
            ]
        ]
    },
    {
        "id": "2dd7a563b6851646",
        "type": "telegram command",
        "z": "2cfab5eede4f2846",
        "name": "",
        "command": "/cat",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "92e993ef03399e2c",
        "strict": false,
        "hasresponse": true,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 2,
        "x": 130,
        "y": 320,
        "wires": [
            [
                "a8cf2d0ca4c3a454"
            ],
            [
                "ed844fec7676e17d"
            ]
        ]
    },
    {
        "id": "a8cf2d0ca4c3a454",
        "type": "subflow:cce18ff7fab50b69",
        "z": "2cfab5eede4f2846",
        "name": "send cat",
        "x": 340,
        "y": 320,
        "wires": []
    },
    {
        "id": "ed844fec7676e17d",
        "type": "debug",
        "z": "2cfab5eede4f2846",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 310,
        "y": 360,
        "wires": []
    },
    {
        "id": "8c80a0224adce448",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "",
        "property": "payload.chatId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "-288676965",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 290,
        "y": 1260,
        "wires": [
            [
                "5407a062bc1c3d4e"
            ],
            [
                "5e2bb1db07d15f61"
            ]
        ]
    },
    {
        "id": "0b8d437138cecd7f",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "",
        "property": "payload.chatId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "-288676965",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 740,
        "wires": [
            [
                "d0b62297b59eb6c7"
            ],
            [
                "fac09d5c4c7d8e6f",
                "8d7841bbd3c6872f"
            ]
        ]
    },
    {
        "id": "fa4c9e49d9600ca2",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "",
        "property": "payload.chatId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "-288676965",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 580,
        "wires": [
            [
                "b444390b08f92b34"
            ],
            [
                "37d44549740cfbe3"
            ]
        ]
    },
    {
        "id": "4ddc01081573a717",
        "type": "switch",
        "z": "2cfab5eede4f2846",
        "name": "",
        "property": "payload.chatId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "-288676965",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 480,
        "wires": [
            [
                "f58aed09cbc2a428"
            ],
            [
                "d86347bdc92cf255"
            ]
        ]
    },
    {
        "id": "f58aed09cbc2a428",
        "type": "subflow:cce18ff7fab50b69",
        "z": "2cfab5eede4f2846",
        "name": "send cat",
        "x": 440,
        "y": 440,
        "wires": []
    },
    {
        "id": "b444390b08f92b34",
        "type": "subflow:cce18ff7fab50b69",
        "z": "2cfab5eede4f2846",
        "name": "send cat",
        "x": 800,
        "y": 500,
        "wires": []
    },
    {
        "id": "5407a062bc1c3d4e",
        "type": "subflow:cce18ff7fab50b69",
        "z": "2cfab5eede4f2846",
        "name": "send cat",
        "x": 460,
        "y": 1240,
        "wires": []
    },
    {
        "id": "d0b62297b59eb6c7",
        "type": "subflow:cce18ff7fab50b69",
        "z": "2cfab5eede4f2846",
        "name": "send cat",
        "x": 840,
        "y": 720,
        "wires": []
    },
    {
        "id": "814159a22646c99b",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "Set Reply",
        "func": "var reply = {\n    \"chatId\": '288676965',\n    \"type\": \"message\",\n    \"content\": \"wordlebot says goodbye: It's been a fun ride, but I have to go now. PS you can still fetch cats\"\n}\n\nmsg.payload = reply;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 240,
        "wires": [
            [
                "aa2a25ccad2b5ca6"
            ]
        ]
    },
    {
        "id": "aa2a25ccad2b5ca6",
        "type": "subflow:986d8b6a2f4ee332",
        "z": "2cfab5eede4f2846",
        "name": "Send message",
        "x": 920,
        "y": 240,
        "wires": []
    },
    {
        "id": "f596cbb1cfc5f108",
        "type": "inject",
        "z": "2cfab5eede4f2846",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 520,
        "y": 240,
        "wires": [
            [
                "814159a22646c99b"
            ]
        ]
    },
    {
        "id": "623cb2634efc048f",
        "type": "function",
        "z": "2cfab5eede4f2846",
        "name": "",
        "func": "const token = '5119461428:AAGSvle8ucVqWMfZmyf1ACz-PywatZ2mYhE';\nlet chatId = '288676965';\n\nvar params = \"?chat_id=\" + chatId + \n          \nmsg.url = 'https://api.telegram.org/bot' + token + '/sendPhoto' + params;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 320,
        "wires": [
            [
                "1a504d1f6c71f720"
            ]
        ]
    },
    {
        "id": "1a504d1f6c71f720",
        "type": "http request",
        "z": "2cfab5eede4f2846",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 750,
        "y": 320,
        "wires": [
            [
                "2563596c32dc1e33"
            ]
        ]
    },
    {
        "id": "2563596c32dc1e33",
        "type": "debug",
        "z": "2cfab5eede4f2846",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 320,
        "wires": []
    },
    {
        "id": "df465bf0cc0686de",
        "type": "sqlite",
        "z": "35d833788bf497c7",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 280,
        "y": 380,
        "wires": [
            [
                "10de3cb472233353"
            ]
        ]
    },
    {
        "id": "7e71b27e81b0590f",
        "type": "inject",
        "z": "35d833788bf497c7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 260,
        "wires": [
            [
                "c4c4757cdd0b8f70",
                "494525a9392a3a6f"
            ]
        ]
    },
    {
        "id": "10de3cb472233353",
        "type": "debug",
        "z": "35d833788bf497c7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 270,
        "y": 420,
        "wires": []
    },
    {
        "id": "81cda8eebd24fd26",
        "type": "function",
        "z": "35d833788bf497c7",
        "name": "CREATE TELEGRAMUSER Table",
        "func": "msg.topic = `Create table TELEGRAMUSER (\n  id INTEGER PRIMARY KEY NOT NULL, \n  username TEXT NOT NULL, \n  firstname TEXT NOT NULL, \n  wintotal INTEGER DEFAULT 0, \n  total INTEGER DEFAULT 0, \n  streak INTEGER DEFAULT 0, \n  maxstreak INTEGER DEFAULT 0\n  )`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 340,
        "wires": [
            [
                "df465bf0cc0686de"
            ]
        ]
    },
    {
        "id": "af4760fd3ef68231",
        "type": "sqlite",
        "z": "35d833788bf497c7",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 380,
        "y": 300,
        "wires": [
            [
                "81cda8eebd24fd26"
            ]
        ]
    },
    {
        "id": "c4c4757cdd0b8f70",
        "type": "function",
        "z": "35d833788bf497c7",
        "name": "DROP GAMES Table",
        "func": "msg.topic = `DROP TABLE IF EXISTS TELEGRAMUSER`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 260,
        "wires": [
            [
                "af4760fd3ef68231"
            ]
        ]
    },
    {
        "id": "fad1b71511ee6faf",
        "type": "function",
        "z": "35d833788bf497c7",
        "name": "CREATE GAMES Table",
        "func": "msg.topic = `CREATE TABLE GAMES (\n\tgameid INTEGER PRIMARY KEY AUTOINCREMENT,\n    id INTEGER not null,\n\tgameday DATE not null,\n    counter INTEGER NOT NULL,\n    wordsplayed TEXT,\n    wordoftheday TEXT,\n\tiscompleted BIT DEFAULT  0,\n\tFOREIGN KEY (id) REFERENCES TELEGRAMUSER (id) \n\t\t\t  ON DELETE CASCADE ON UPDATE NO ACTION\n)`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 360,
        "wires": [
            [
                "39daf092101eeae9"
            ]
        ]
    },
    {
        "id": "494525a9392a3a6f",
        "type": "function",
        "z": "35d833788bf497c7",
        "name": "DROP GAMES Table",
        "func": "msg.topic = `DROP TABLE IF EXISTS GAMES`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 320,
        "wires": [
            [
                "70d9f8c22a789b63"
            ]
        ]
    },
    {
        "id": "70d9f8c22a789b63",
        "type": "sqlite",
        "z": "35d833788bf497c7",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 960,
        "y": 320,
        "wires": [
            [
                "fad1b71511ee6faf"
            ]
        ]
    },
    {
        "id": "39daf092101eeae9",
        "type": "sqlite",
        "z": "35d833788bf497c7",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 980,
        "y": 360,
        "wires": [
            [
                "10de3cb472233353"
            ]
        ]
    },
    {
        "id": "dec95a61fec931fa",
        "type": "inject",
        "z": "35d833788bf497c7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 420,
        "y": 600,
        "wires": [
            [
                "2d495c2fafccd546"
            ]
        ]
    },
    {
        "id": "86abbf4c099f9178",
        "type": "debug",
        "z": "35d833788bf497c7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1110,
        "y": 720,
        "wires": []
    },
    {
        "id": "2d495c2fafccd546",
        "type": "function",
        "z": "35d833788bf497c7",
        "name": "CREATE GAMES Table",
        "func": "msg.topic = `DELETE FROM GAMES\nWHERE gameid = 7 and id = 1220632910;`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 660,
        "wires": [
            [
                "33731654bf06a938"
            ]
        ]
    },
    {
        "id": "33731654bf06a938",
        "type": "sqlite",
        "z": "35d833788bf497c7",
        "mydb": "5faa39d33d1f8bf6",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "WORDLE DB",
        "x": 880,
        "y": 660,
        "wires": [
            [
                "86abbf4c099f9178"
            ]
        ]
    },
    {
        "id": "d1e38ae1713b06ab",
        "type": "inject",
        "z": "70934f2ce73d886f",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "url",
                "v": "https://webapp4.asu.edu/catalog/myclasslistresults?t=2227&s=CSE&l=grad&hon=F&promod=F&c=TEMPE&page=1",
                "vt": "str"
            },
            {
                "p": "courses",
                "v": "[\"563\"]",
                "vt": "json"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "grad",
        "payload": "checking grad course availability",
        "payloadType": "str",
        "x": 150,
        "y": 240,
        "wires": [
            [
                "39e45c7cb245636b"
            ]
        ]
    },
    {
        "id": "8fdb725a9f3a4b0c",
        "type": "http request",
        "z": "70934f2ce73d886f",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 530,
        "y": 220,
        "wires": [
            [
                "1934de668f8cc33c"
            ]
        ]
    },
    {
        "id": "39e45c7cb245636b",
        "type": "switch",
        "z": "70934f2ce73d886f",
        "name": "",
        "property": "courses",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 240,
        "wires": [
            [
                "8fdb725a9f3a4b0c"
            ],
            [
                "46ba0a0b2e1a2c9d"
            ]
        ]
    },
    {
        "id": "46ba0a0b2e1a2c9d",
        "type": "debug",
        "z": "70934f2ce73d886f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "$join($append(payload, ': no courses to check'), \"\")",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 260,
        "wires": []
    },
    {
        "id": "77e8092e0f31c5bf",
        "type": "function",
        "z": "70934f2ce73d886f",
        "name": "",
        "func": "var sub_num = msg.courses;\nvar sub_list = [];\nvar subjects = msg.payload;\nsubjects.forEach(function(sub){\n    let num = sub.innerText.trim().split(\" \")[1];\n    if(sub_num.includes(num)){\n        let u = sub.parentElement.getElementsByClassName('class-results-drawer')[0].getAttribute('url');\n        let s = {\n            \"classnum\": num,\n            \"url\":u\n        }\n        sub_list.push(s);\n    }\n})\nmsg.payload = sub_list;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 220,
        "wires": [
            [
                "8ec1c4ae7dcd3e2e"
            ]
        ]
    },
    {
        "id": "8ec1c4ae7dcd3e2e",
        "type": "switch",
        "z": "70934f2ce73d886f",
        "name": "Sub_list_urls",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 910,
        "y": 220,
        "wires": [
            [
                "016e5918451a66ae"
            ],
            []
        ]
    },
    {
        "id": "c6ef3ce3078b26ca",
        "type": "function",
        "z": "70934f2ce73d886f",
        "name": "",
        "func": "var t = msg.payload.document.querySelector('#reserved-tbl');\nvar res1 = false;\nfor (let index = 0;index< t.rows.length; index++) {\n    if(t.rows[index].innerText.includes(\"Computer Science MS\") && parseInt(t.rows[index].children[1].innerText) > 0){\n        res1 = true;\n    }\n}\nmsg.res = res1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 600,
        "wires": [
            [
                "46694859dca60e56"
            ]
        ]
    },
    {
        "id": "016e5918451a66ae",
        "type": "split",
        "z": "70934f2ce73d886f",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 350,
        "y": 480,
        "wires": [
            [
                "41151d2a7af7ee66"
            ]
        ]
    },
    {
        "id": "41151d2a7af7ee66",
        "type": "change",
        "z": "70934f2ce73d886f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "payload.url",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 520,
        "wires": [
            [
                "46cc0a1e9735efd1"
            ]
        ]
    },
    {
        "id": "46cc0a1e9735efd1",
        "type": "http request",
        "z": "70934f2ce73d886f",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 410,
        "y": 560,
        "wires": [
            [
                "c6ef3ce3078b26ca",
                "e6d7de448198c2e6"
            ]
        ]
    },
    {
        "id": "46694859dca60e56",
        "type": "switch",
        "z": "70934f2ce73d886f",
        "name": "",
        "property": "res",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 560,
        "wires": [
            [
                "33a323829d9f2991"
            ],
            [
                "1adec9f51c3e5f6f"
            ]
        ]
    },
    {
        "id": "33a323829d9f2991",
        "type": "debug",
        "z": "70934f2ce73d886f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Available\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 540,
        "wires": []
    },
    {
        "id": "1adec9f51c3e5f6f",
        "type": "debug",
        "z": "70934f2ce73d886f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "\"Not Available\"",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 580,
        "wires": []
    },
    {
        "id": "e6d7de448198c2e6",
        "type": "function",
        "z": "70934f2ce73d886f",
        "name": "",
        "func": "var t = msg.payload.document.querySelector('#reserved-tbl');\nvar m = t.rows[t.rows.length - 1].innerText;\nvar res2 = false;\nif(m.includes(\"Non Reserved Available Seats\") && parseInt(m.split(\": \")[1]) > 0){\n    res2 = true;\n}\nmsg.res = res2;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 520,
        "wires": [
            [
                "46694859dca60e56"
            ]
        ]
    },
    {
        "id": "fb04d4a0d44b9600",
        "type": "debug",
        "z": "70934f2ce73d886f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 180,
        "wires": []
    },
    {
        "id": "1934de668f8cc33c",
        "type": "html",
        "z": "70934f2ce73d886f",
        "name": "",
        "property": "payload",
        "outproperty": "payload",
        "tag": "td.subjectNumberColumnValue",
        "ret": "html",
        "as": "single",
        "x": 750,
        "y": 140,
        "wires": [
            [
                "fb04d4a0d44b9600"
            ]
        ]
    }
]